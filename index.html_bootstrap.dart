import "dart:html" as o;import "dart:async" as v;import "dart:collection" as jD;import "dart:uri" as sI;import "dart:json" as kD;import "dart:isolate" as rI;import "dart:math" as AI;class BI{static const  CI="Chrome";static const  DI="Firefox";static const  EI="Internet Explorer";static const  FI="Safari";final  JH;final  minimumVersion;const BI(this.JH,[this.minimumVersion]);}class GI{final  name;const GI(this.name);}class HI extends OC{static final dE=new o.DivElement(),eE=new o.DivElement(),fE=new o.DocumentFragment.html('''
        <h2>Game Panel</h2>
        <canvas id="frontBuffer"></canvas>

        <div>
          <button id="pause" disabled="">Pause</button>
          <button id="end" disabled="">End game</button>
        </div>
          
        <template></template>
      ''');var yI,zI;var AJ;var BJ; kC(){var CJ=createShadowRoot("game-panel");BJ=new uB(CJ);CJ.nodes.add(fE.clone(true));yI=CJ.nodes[5].nodes[1];BJ.listen(yI.onClick,(g){tH();});zI=CJ.nodes[5].nodes[3];BJ.listen(zI.onClick,(g){SH();});AJ=CJ.nodes[7];BJ.jB(AJ,()=>t!=null,(BJ){var DJ,EJ;DJ=dE.clone(true);var FJ=BJ.TD(()=>t.pC,false);DJ.nodes.addAll([new o.Text('\n            Score: '),FJ,new o.Text('\n          ')]);EJ=eE.clone(true);var GJ=BJ.TD(()=>t.aB.aC,false);EJ.nodes.addAll([new o.Text('\n            Time remaining: '),GJ,new o.Text('\n          ')]);BJ.addAll([new o.Text('\n          '),DJ,new o.Text('\n          '),EJ,new o.Text('\n        ')]);});BJ.NB();} mC(){BJ.insert();} oC(){BJ.remove();BJ=yI=zI=AJ=null;}var t;var zB;var AC;var HJ;var kB;var paused=false;var IJ;var JJ;var KJ;SE(){JJ=o.query('#pause');KJ=o.query('#end');IJ=o.query('#frontBuffer');HJ=new GC(IJ);HJ.hH.WE=false;HJ.dD=XH;HJ.bD=UH;HJ.onTouchStart=WH;HJ.onTouchEnd=VH;RH();pH();} pH(){t=new pB(zB,IJ,HJ,AC);t.aB.start();t.done.then((LJ){KE();});HJ.start();} RH(){KJ.disabled=false;JJ.disabled=false;} KE(){KJ.disabled=true;JJ.disabled=true;} SH(){t.stop();KE();print('GAME ENDED');} tH(){if(!paused){t.aB.pause();JJ.text="Resume";}else{t.aB.nH();JJ.text="Pause";}paused=!paused;} OH( i, h){var g=IJ.context2d;g.beginPath();g.arc(i,h,20.0,0,2*AI.PI);g.fillStyle='green';g.fill();} XH( g){t.QC.update(kB);} UH( p){if(t!=null){t.QC.kH();}if(kB==null){return;}var g=new tC(IJ);kB.fD.forEach((h){var i=h.x;var j=h.y;if(g.contains(i,j)){var m=g.uH(i);var l=g.vH(j);OH(m,l);}});} WH( h, g){if(kB==null){kB=g;}} VH( i, h){if(h==kB){kB=null;var g=t.QC.YC;if(t.IH(g)){print('Found word ${g}');}}}}class II extends OC{static final gE=new o.Element.html('<ul>\n            <template></template>\n          </ul>'),hE=new o.LIElement(),iE=new o.DocumentFragment.html('''
        <h2>High Scores</h2>
        <template></template>
        <template></template>
      ''');var MJ,NJ;var OJ; kC(){var PJ=createShadowRoot("high-scores-panel");OJ=new uB(PJ);PJ.nodes.add(iE.clone(true));MJ=PJ.nodes[3];OJ.jB(MJ,()=>WD.length>0,(OJ){var QJ,RJ;RJ=gE.clone(true);QJ=RJ.nodes[1];OJ.loop(QJ,()=>WD,(h,g,OJ){var i=h[g];var SJ;SJ=hE.clone(true);var TJ=OJ.TD(()=>i,false);SJ.nodes.add(TJ);OJ.addAll([new o.Text('\n              '),SJ,new o.Text('\n            ')]);});OJ.addAll([new o.Text('\n          '),RJ,new o.Text('\n        ')]);});NJ=PJ.nodes[5];OJ.jB(NJ,()=>WD.length<=0,(OJ){OJ.add(new o.Text('\n          No high scores yet.\n        '));});OJ.NB();} mC(){OJ.insert();} oC(){OJ.remove();OJ=MJ=NJ=null;}var WD=<int>[] ;}class JI extends OC{static final jE=new o.DocumentFragment.html('''
        <h2>Main Panel</h2>
        <button>Show high scores</button>
        <button>New game</button>
      ''');var UJ,VJ;var WJ; kC(){var XJ=createShadowRoot("main-panel");WJ=new uB(XJ);XJ.nodes.add(jE.clone(true));UJ=XJ.nodes[3];WJ.listen(UJ.onClick,(g){dC='highScores';});VJ=XJ.nodes[5];WJ.listen(VJ.onClick,(g){dC='newGame';});WJ.NB();} mC(){WJ.insert();} oC(){WJ.remove();WJ=UJ=VJ=null;}}class KI extends OC{static final kE=new o.DocumentFragment.html('''
        <h2>New Game Panel</h2>
        <div>
          <button>Start Game</button>
        </div>
      ''');var YJ;var ZJ; kC(){var aJ=createShadowRoot("new-game-panel");ZJ=new uB(aJ);aJ.nodes.add(kE.clone(true));YJ=aJ.nodes[3].nodes[1];ZJ.listen(YJ.onClick,(g){dC='game';});ZJ.NB();} mC(){ZJ.insert();} oC(){ZJ.remove();ZJ=YJ=null;}}class lE{var x,y;lE(this.x,this.y);}class nE{final  k=new List<String>();nE(){k.add('K');k.add('J');k.add('X');k.add('QU');k.add('QU');k.add('Z');k.add('B');k.add('B');k.add('C');k.add('C');k.add('M');k.add('M');k.add('P');k.add('P');k.add('F');k.add('F');k.add('H');k.add('H');k.add('V');k.add('V');k.add('W');k.add('W');k.add('Y');k.add('Y');k.add('G');k.add('G');k.add('G');k.add('L');k.add('L');k.add('L');k.add('L');k.add('S');k.add('S');k.add('S');k.add('S');k.add('U');k.add('U');k.add('U');k.add('U');k.add('D');k.add('D');k.add('D');k.add('D');k.add('N');k.add('N');k.add('N');k.add('N');k.add('N');k.add('N');k.add('R');k.add('R');k.add('R');k.add('R');k.add('R');k.add('R');k.add('T');k.add('T');k.add('T');k.add('T');k.add('T');k.add('T');k.add('O');k.add('O');k.add('O');k.add('O');k.add('O');k.add('O');k.add('O');k.add('O');k.add('A');k.add('A');k.add('A');k.add('A');k.add('A');k.add('A');k.add('A');k.add('A');k.add('A');k.add('A');k.add('I');k.add('I');k.add('I');k.add('I');k.add('I');k.add('I');k.add('I');k.add('I');k.add('I');k.add('E');k.add('E');k.add('E');k.add('E');k.add('E');k.add('E');k.add('E');k.add('E');k.add('E');k.add('E');k.add('E');k.add('E');} aH( m){var l=new AI.Random(m);var g=new List<bool>(k.length);for(int j=0;j<g.length;j++ ){g[j]=false;}var i=new List<String>();while (i.length<16){do{var h=l.nextInt(k.length);if(g[h]==false){g[h]=true;i.add(k[h]);break;}}while(true);}return i;}}class tC{final  left;final  top;final  width;final  height;tC( g):this.left=g.offsetLeft,this.top=g.offsetTop,this.width=g.clientWidth,this.height=g.clientHeight;tC.uI(this.left,this.top,this.width,this.height); PH( h){var g=h.getContext('2d');g.strokeRect(left,top,width,height);} get bottom=>top+height; get right=>left+width; contains( h, g){return left<=h&&h<=right&&top<=g&&g<=bottom;} uH( g)=>g-left; vH( g)=>g-top; toString()=>'[${left},${top}], [${right}, ${bottom}]';}class rC extends CB{static const  uC=70;final  q;var ZC=false;var gameLength=uC;var PD=new v.Completer();var bJ='Not yet started'; get aC{if(dB){eB(this,w.HB,'timeRemaining');}return bJ;}set aC( g){if(HC(this)){IC(this,w.HB,'timeRemaining',bJ,g);}bJ=g;}var BC=uC;rC( this.q,{this.gameLength: uC}){if(gameLength!=null){BC=gameLength;}aC=ME(BC);} ME( h){if(h<=0)return 'OUT OF TIME!!!!';var l=h~/60;var g=h%60;var j="";var i="";if(l>0){j='${l.toString()}:';i=(g<=9)?'0${g}':'${g}';}else{i=g.toString();}return '${j}${i}';}gD( eJ){if(!ZC){BC-- ;aC=ME(BC);if(BC>0){q.HE(gD,1.0);}else{PD.complete(true);print('DONE!');}}}start(){ZC=false;q.HE(gD,1.0);}stop(){ZC=true;BC==0;aC='GAME OVER!';PD.complete(true);}pause(){ZC=true;}nH(){ZC=false;gD(null);}}class mE{final  name;final  rect;mE(this.name,i,g,h,j):this.rect=new o.Rect(i,g,h,j);}class sC{final  DC=new Map();sC.tI( h){h.split('\n').forEach((g)=>DC[g]=true);} bH( g)=>DC.containsKey(g); get length=>DC.length;}class pB extends CB{final  qH=new nE();static const wC=4;static const  xC=const{'A':1,'B':3,'C':3,'D':2,'E':1,'F':4,'G':2,'H':4,'I':1,'J':8,'K':5,'L':1,'M':3,'N':1,'O':1,'P':3,'QU':10,'R':1,'S':1,'T':1,'U':1,'V':4,'W':4,'X':8,'Y':4,'Z':10};var dJ=new List.generate(4,(eJ)=>new List<String>(4)); get UC{if(dB){eB(this,w.HB,'grid');}return dJ;}var fJ=[] ;var gJ=0; get pC{if(dB){eB(this,w.HB,'score');}return gJ;}set pC( g){if(HC(this)){IC(this,w.HB,'score',gJ,g);}gJ=g;}final  zB;var hJ=new Set<String>(); get DC{if(dB){eB(this,w.HB,'words');}return hJ;}final  canvas;final  AC;var iJ; get aB{if(dB){eB(this,w.HB,'gameClock');}return iJ;}set aB( g){if(HC(this)){IC(this,w.HB,'gameClock',iJ,g);}iJ=g;}var jJ; get QC{if(dB){eB(this,w.HB,'board');}return jJ;}set QC( g){if(HC(this)){IC(this,w.HB,'board',jJ,g);}jJ=g;}pB(this.zB,this.canvas,g,this.AC){kJ();QC=new vC(this,canvas);aB=new rC(g);} stop(){aB.stop();} kJ(){var i=new AI.Random().nextInt(1000000);var j=qH.aH(i);for(var h=0;h<wC;h++ ){for(var g=0;g<wC;g++ ){this.UC[h][g]=j[h*wC+g];}}} IH( g){if(DC.contains(g)){return false;}if(lJ(g)){pC+= oH(g);print('score = ${pC}');DC.add(g);return true;}return false;} oH( h){var g=h.split('').map((i)=>pB.xC[i]).toList();return g.reduce((j,l)=>j+l);} get done{return aB.PD.future;} lJ( g)=>zB.bH(g);}class vC{final  OD=320;final  ND=320;final  ZB=4;var EB;var TC;var jI;var canvas;final  mB=new List<tC>();final  CC=new Set<int>();var YC='';final  t;var kI;var oI;vC( this.t, this.canvas){mB.length=16;dH();} dH(){canvas.width=OD;canvas.height=ND;var p=AI.min(OD,ND);EB=p/4.75;TC=EB*0.25;for(int h=0;h<ZB;h++ ){for(int g=0;g<ZB;g++ ){var j=(h*(EB+TC)).toInt();var m=(g*(EB+TC)).toInt();var i=EB.toInt();var l=EB.toInt();mB[qC(h,g)]=new tC.uI(j,m,i,l);}}} qC( g, h){return g*4+h;} ZH( g, h){return mB[qC(g,h)];} YH( h, j){var i=j*(EB+TC);var g=h*(EB+TC);return new lE(i,g);} update( j){if(j!=null){var p=0;for(int h=0;h<ZB;h++ ){for(int g=0;g<ZB;g++ ){var l=ZH(h,g);for(var i in j.fD){if(l.contains(i.x,i.y)){var m=qC(h,g);if(CC.contains(m)==false){CC.add(qC(h,g));YC='${YC}${t.UC[h][g]}';}}}}}}else{CC.clear();YC='';}if(CC.length>0){print(CC);print(YC);}} kH(){var g=canvas.context2d;g.clearRect(0,0,OD,ND);const  UB=5;const  OB=60;for(int h=0;h<mB.length;h++ ){var p=mB[h].left;var s=mB[h].top;if(CC.contains(h)){g.strokeStyle='#ff0000';}else{g.strokeStyle='#000000';}mB[h].PH(canvas);var u=t.UC[h~/ZB][h%ZB];t.AC.NH(u,g,p,s);g.fillText(pB.xC[u].toString(),p+UB,s+OB);}return;for(int h=0;h<ZB;h++ ){for(int j=0;j<ZB;j++ ){var i=YH(h,j);g.fillStyle='#f00';g.fillRect(i.x,i.y,EB,EB);g.fillStyle='#000';g.font='${(EB).floor()/3*2}px sans-serif';g.textBaseline='middle';var l=t.UC[h][j];var m=g.measureText(l).width.clamp(0,EB);var KB=(EB-m)/2;g.fillText(l,i.x+KB,i.y+EB*0.5);g.fillStyle='#000';g.font='10px sans-serif';g.textBaseline='middle';l=pB.xC[t.UC[h][j]].toString();m=g.measureText(l).width;g.fillText(l,i.x+EB-m-3,i.y+5+3);}}}}class yC{final  QE;final  elements=new Map<String,mE>();yC(this.QE); HH( g, j, h, i, l){elements[g]=new mE(g,j,h,i,l);} NH( h, j, l, i){var g=elements[h];if(g==null){print('no atlas for ${h}');return;}var m=new o.Rect(l,i,g.rect.width,g.rect.height);j.drawImageToRect(QE,m,sourceRect:g.rect);}}var qB=new CD();var lD;var zC;final AD=new CB();var BD='main'; get dC{if(dB){eB(AD,w.HB,'currentPanel');}return BD;}set dC( g){if(HC(AD)){IC(AD,w.HB,'currentPanel',BD,g);}BD=g;} oE(){if(qB['game.dictionary']==null){throw new StateError("Can't play without a dictionary.");}lD=new sC.tI(qB['game.dictionary']);var j=qB['game.tile-letters'];if(j==null){throw (new StateError('Can\'t play without tile images.'));}zC=new yC(j);final  KB=5;final  l=6;final  g=70;var m=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','~N','O','P','Q','QU','R','rr','S','T','U','V','W','X','Y','Z',' '];for(int i=0;i<KB;i++ ){for(int h=0;h<l;h++ ){var u=(i*l)+h;var p=h*g;var s=i*g;zC.HH(m[u],p,s,g,g);}}} pE(){qB.TB['image']=new OI();qB.lB['image']=new NI();print('Touch events supported? ${o.TouchEvent.supported}');return qB.XD('game','assets/_.pack').then((eJ)=>oE());}main(){CE=true;qE();rE();}qE(){pE();} rE(){var mJ=o.document.body;final nJ=new o.Element.html('<div is="main-panel"></div>'),oJ=new o.Element.html('<div is="game-panel"></div>'),pJ=new o.Element.html('<div is="new-game-panel"></div>'),qJ=new o.Element.html('<div is="high-scores-panel"></div>');var rJ,sJ,tJ,uJ;var vJ=new uB(mJ);rJ=mJ.nodes[1];vJ.jB(rJ,()=>dC=='main',(vJ){var wJ;wJ=nJ.clone(true);vJ.SB(new JI()..host=wJ);vJ.addAll([new o.Text('\n      '),wJ,new o.Text('\n    ')]);});sJ=mJ.nodes[3];vJ.jB(sJ,()=>dC=='game',(vJ){var xJ;xJ=oJ.clone(true);vJ.YE(()=>lD,(g){if(xJ.xtag.zB!=g)xJ.xtag.zB=g;},false,false);vJ.YE(()=>zC,(g){if(xJ.xtag.AC!=g)xJ.xtag.AC=g;},false,false);vJ.SB(new HI()..host=xJ);vJ.addAll([new o.Text('\n      '),xJ,new o.Text('\n    ')]);});tJ=mJ.nodes[5];vJ.jB(tJ,()=>dC=='newGame',(vJ){var yJ;yJ=pJ.clone(true);vJ.SB(new KI()..host=yJ);vJ.addAll([new o.Text('\n      '),yJ,new o.Text('\n    ')]);});uJ=mJ.nodes[7];vJ.jB(uJ,()=>dC=='highScores',(vJ){var zJ;zJ=qJ.clone(true);vJ.SB(new II()..host=zJ);vJ.addAll([new o.Text('\n      '),zJ,new o.Text('\n    ')]);});vJ.NB();vJ.insert();}class LI extends cB{var AK;LI(this.AK); load( h, g){var p=new sE();var s=p.load(h,g);return s.then((u){var i;try {i=kD.parse(u);}on FormatException catch (UB){g.iB(h,UB.message);return new v.Future.value(null);}var l={};var m=[] ;var EC=new sI.Uri(h.url);i.forEach((j,nB){var KB=EC.resolve(nB).toString();var oB=new n(null,j,KB,'',null,{},null,{});m.add(AK.load(oB,g).then((OB){l[j]=OB;}));});return v.Future.wait(m).then((FK){return l;});});} delete( g){}}class sE extends cB{ load( i, g){return cB.xE(i,'text',(h)=>h.responseText,g);} delete( g){}}class OI extends cB{ load( g, i){i.QD(g);var l=new v.Completer<qI>();var h=new o.ImageElement();h.onLoad.listen((j){i.yB(g);l.complete(h);});h.onError.listen((j){i.iB(g,"${j.runtimeType} : ${j.type}");i.yB(g);l.complete(null);});h.src=g.url;return l.future;} delete( g){}}class QI extends rB{ initialize( g){g.GB='';}v.Future<n> VC( i, g, h){h.PC(g);try {if(i is String){g.GB=i;}else{h.xB(g,"A text asset was not a String.");}return new v.Future.value(g);}finally {h.hB(g);}} delete( g){}}class NI extends rB{ initialize( g){g.GB=null;}v.Future<n> VC( i, g, h){h.PC(g);try {g.GB=i;return new v.Future.value(g);}finally {h.hB(g);}} delete( g){}}class RI extends rB{final  bB;RI(this.bB); initialize( g){g.GB=new PB(bB,g.name);g.GB.BK=g.eD;}v.Future<n> VC( j, g, h){h.ZE(g);h.PC(g);if(j==null){h.xB(g,"A pack asset was not available.");h.hB(g);h.nC(g);return new v.Future.value(g);}var EC=new sI.Uri(g.url);var p;if(j is String){try {p=kD.parse(j);}on FormatException catch (UB){h.xB(g,UB.message);h.hB(g);h.nC(g);return new v.Future.value(g);}}var l=g.GB;var OB=new mD.CF(p);var s=new List<v.Future<n>>();OB.MB.values.forEach((i){var KB=EC.resolve(i.url).toString();var nB=i.name;var u=i.type;if(u==''){return;}var m=l.aE(nB,u,KB,i.VE,i.RE);var oB=bB.HK(m).then((FK){m.DK='Ok';});s.add(oB);});return v.Future.wait(s).then((iD){h.hB(g);h.nC(g);return new v.Future.value(l);});} delete( g){if(g==null){return;}}}class VB{static const tE='PackImportStart';static const uE='PackImportEnd';static const vE='AssetLoadStart';static const wE='AssetLoadEnd';static const yE='AssetLoadError';static const zE='AssetImportStart';static const AF='AssetImportEnd';static const BF='AssetImportError';final  type;final  label;final  XE;VB(this.type,this.label,this.XE); toString(){return '${XE}, ${type}, ${label}';}}class MI extends rB{ initialize( g){g.GB={};}v.Future<n> VC( i, g, h){h.PC(g);try {if(i is String){try {var j=kD.parse(i);g.GB=j;}on FormatException catch (l){h.xB(g,l.message);}}else{h.xB(g,"A text asset was not a String.");}return new v.Future.value(g);}finally {h.hB(g);}} delete( g){}}class CD{final  lB=new Map<String,rB>();final  TB=new Map<String,cB>();final  bC;CD([tracer0]):bC=(tracer0==null)?new SI():tracer0{CK=new PB(this,'root');lB['json']=new MI();lB['text']=new QI();lB['pack']=new RI(this);lB['textmap']=new NI();lB['imagemap']=new NI();TB['textmap']=new LI(new sE());TB['imagemap']=new LI(new OI());TB['json']=new sE();TB['text']=TB['json'];TB['pack']=TB['json'];}var CK; get root=>CK; lC( g)=>root.lC(g); operator[]( g)=>lC(g); XD( g, h){return CK.XD(g,h);} HK( g){if(g.YD==null){bC.iB(g,'no loader registered for ${g.type}');return new v.Future.value(g);}if(g.WC==null){bC.iB(g,'no importer registered for ${g.type}');return new v.Future.value(g);}g.DK='Loading';return g.YD.load(g,bC).then((h){g.DK='Importing';return g.WC.VC(h,g,bC);});}}abstract class cB{static  xE( h, p, m(HttpRequest), i){i.QD(h);var j=new v.Completer<qI>();var g=new o.HttpRequest();g.open('GET',h.url,async:true);g.responseType=p;g.onLoad.listen((l){if((g.status>=200&&g.status<300)||g.status==0||g.status==304){i.yB(h);j.complete(m(g));}else{i.iB(h,"http status code rejected : ${g.status} : ${g.statusText}");i.yB(h);j.complete(null);}});g.onError.listen((l){i.iB(h,"http status code rejected : ${g.status} : ${g.statusText}");i.yB(h);j.complete(null);});g.send();return j.future;} load( h, g); delete( g);}abstract class rB{ initialize( g);v.Future<n> VC( h, i, g); delete( g);}class n{final  eD;final  name;final  type;final  YD;final  WC;final  fH;final  cH;final  url;var DK=''; get status=>DK;var EK; get GB=>EK;set GB( g){EK=g;DK='OK';} get eH=>type=='pack';n(this.eD,this.name,this.url,this.type,this.YD,this.fH,this.WC,this.cH); get path=>'${eD.path}.${name}'; GK(){if(WC!=null){WC.delete(EK);}}}class PB{final  bB;final  name;final  MB=new Map<String,n>();var BK; get parent=>BK; get path{if(parent==null){return '';}var g=parent.path;if(g==''){return name;}else{return '${g}.${name}';}}PB(this.bB,this.name); type( h){var g=MB[h];if(g!=null){return g.type;}return null;} url( h){var g=MB[h];if(g!=null){return g.url;}return null;} aE( h, j, p, l, s){if(mD.DF(h)==false){throw new ArgumentError('${h} is an invalid name.');}var g=MB[h];if(g!=null){throw new ArgumentError('${h} already exists.');}var m=bB.TB[j];var i=bB.lB[j];g=new n(this,h,p,j,m,l,i,l);if(i!=null){i.initialize(g);}if(i==null){g.DK='No importer available.';}else if(m==null){g.DK='No loader available.';}else{g.DK='OK';}MB[h]=g;return g;} lC( g){var i=g.split(".");var h=IK(g,i,false);if(h!=null){return h.GB;}return null;} operator[]( g)=>lC(g); IK( i, g, j){if(g.length==0){if(j==false){return null;}throw new ArgumentError('${i} does not exist.');}var m=g.removeAt(0);var h=MB[m];if(h==null){if(j==false){return null;}throw new ArgumentError('${i} does not exist.');}if(h.eH&&g.length>0){var l=h.GB;return l.IK(i,g,j);}if(g.length>0){if(j==false){return null;}throw new ArgumentError('${i} does not exist.');}return h;} XD( h, i){var g=aE(h,'pack',i,{},{});g.GB.BK=this;return bB.HK(g).then((FK)=>new v.Future.value(g.GB));} get length=>MB.length; clear(){GK();} GK(){MB.forEach((h,g){g.GK();});MB.clear();}}class LB{final JK=new v.StreamController<VB>(); ZE( g)=>RB(g,VB.tE,null); nC( g)=>RB(g,VB.uE,null); QD( g)=>RB(g,VB.vE,null); yB( g)=>RB(g,VB.wE,null); iB( h, g)=>RB(h,VB.yE,g); PC( g)=>RB(g,VB.zE,null); hB( g)=>RB(g,VB.AF,null); xB( h, g)=>RB(h,VB.BF,g); RB( h, l, g){var j=(g==null)?h.url:"${h.url} >> ${g}";var i=(o.window.performance.now()*1000).toInt();var m=new VB(l,j,i);JK.add(m);}}class SI extends LB{ ZE( g){} nC( g){} QD( g){} yB( g){} iB( h, g){} PC( g){} hB( g){} xB( h, g){} RB( i, h, g){}}class FC{final  name;final  url;var type;final  VE;final  RE;FC(this.name,this.url,this.type,this.VE,this.RE);static  CF( i, g){var l=g['url'];var m=g['type'];var h=g['loadArguments'];var j=g['importArguments'];var p=new FC(i,l,m,h,j);return p;}}class mD{static  DF( g){return g!='';}final  MB=new Map<String,FC>(); clear(){MB.clear();}mD.CF( h){if(h==null){return;}h.forEach((g,j){var i=FC.CF(g,j);MB[g]=i;});}}typedef nD( timer);abstract class oD{ get x; get y; get dx; get dy; get time; get AB;}class pD{final  RC;var NE=0;var OE=0;var rH=0.0;var sH=0.0;pD(this.RC); get SC=>NE>OE;}typedef  EF( gameLoop);abstract class BB{var cC=0.015;var ZD=0.03; get AB; get PE; get QH=>cC;static  DD(g)=>g/1000.0; get time=>DD(new DateTime.now().millisecondsSinceEpoch);BB(){} iH(){var PK=QK.length;for(int g=0;g<PK;g++ ){QK[g].NK(QH);}for(int g=QK.length-1;g>=0;g-- ){var h=QK.length-1;if(QK[g].OK){if(g!=h){QK[g]=QK[h];}QK.removeLast();}}} start(); stop();final  QK=new List<eC>(); HE( h, i,{ periodic: false}){var g=new eC.vI(this,i,h,MK:periodic);QK.add(g);return g;}var dD;}class eC{final  q;final  cD;var KK=0.0;final  LK;var MK; get periodic=>MK;eC.vI(this.q,this.LK,this.cD,{this.MK: false}){KK=LK;} NK( g){if(OK){return;}KK-= g;if(KK<=0.0){if(cD!=null){cD(this);}}} get OK{var g=KK<=0.0;if(g&&periodic){KK=LK;return false;}if(g){return true;}else{return false;}} cancel(){KK=-1.0;MK=false;}}class FF{FF();}class qD{final  SC;final  AB;final  RC;final  time;qD(this.RC,this.SC,this.AB,this.time); toString()=>'Button: ${RC} DOWN: ${SC} [${AB}@${time}]';}class ED{final  q;final  buttons=new Map<int,pD>();ED(this.q, h){for(int g in h){buttons[g]=new pD(g);}} JE( h){var g=buttons[h.RC];if(g==null){return;}if(h.SC){if(g.SC==false){g.NE=h.AB;g.rH=h.time;}}else{g.OE=h.AB;g.sH=h.time;}}}class rD{final  q;rD(this.q){q.element.onClick.listen(RK);o.document.onPointerLockChange.listen(SK);} lH(){q.element.requestPointerLock();} RK( g){if(WE){lH();}}var WE=true; SK( g){if(q.onPointerLockChange!=null){q.onPointerLockChange(q);}}}class WB{static const sD=0x1;static const tD=0x2;static const uD=0x3;final  event;final  type;WB(this.event,this.type);}class GF{final  x;final  y;final  dx;final  dy;final  RD;final  SD;final  time;final  hD;final  AB;GF(this.x,this.y,this.dx,this.dy,this.RD,this.SD,this.hD,this.time,this.AB);}class HF{final  q;var buttons;var pI;HF(this.q){}}typedef  IF( gameLoop);class JF extends ED{static const KF=o.KeyCode.A;static const MF=o.KeyCode.B;static const NF=o.KeyCode.C;static const OF=o.KeyCode.D;static const QF=o.KeyCode.E;static const RF=o.KeyCode.F;static const SF=o.KeyCode.G;static const UF=o.KeyCode.H;static const VF=o.KeyCode.I;static const XF=o.KeyCode.J;static const ZF=o.KeyCode.K;static const bF=o.KeyCode.L;static const dF=o.KeyCode.M;static const fF=o.KeyCode.N;static const gF=o.KeyCode.O;static const hF=o.KeyCode.P;static const iF=o.KeyCode.Q;static const jF=o.KeyCode.R;static const kF=o.KeyCode.S;static const lF=o.KeyCode.T;static const mF=o.KeyCode.U;static const nF=o.KeyCode.V;static const oF=o.KeyCode.W;static const pF=o.KeyCode.X;static const qF=o.KeyCode.Y;static const rF=o.KeyCode.Z;static const sF=o.KeyCode.SHIFT;static const tF=o.KeyCode.CTRL;static const uF=o.KeyCode.ALT;static const vF=o.KeyCode.SPACE;static const wF=o.KeyCode.ZERO;static const xF=o.KeyCode.ONE;static const yF=o.KeyCode.TWO;static const zF=o.KeyCode.THREE;static const AG=o.KeyCode.FOUR;static const BG=o.KeyCode.FIVE;static const CG=o.KeyCode.SIX;static const DG=o.KeyCode.SEVEN;static const EG=o.KeyCode.EIGHT;static const FG=o.KeyCode.NINE;static const GG=o.KeyCode.TILDE;static const HG=o.KeyCode.ENTER;static const IG=o.KeyCode.UP;static const JG=o.KeyCode.DOWN;static const WF=o.KeyCode.LEFT;static const aF=o.KeyCode.RIGHT;static final  cF=[KF,MF,NF,OF,QF,RF,SF,UF,VF,XF,ZF,bF,dF,fF,gF,hF,iF,jF,kF,lF,mF,nF,oF,pF,qF,rF,sF,tF,uF,vF,wF,xF,yF,zF,AG,BG,CG,DG,EG,FG,GG,HG,IG,JG,WF,aF];JF(g):super(g,cF);}typedef  LF( gameLoop);class vD implements oD{final  x;final  y;final  dx;final  dy;final  time;final  AB;vD(this.x,this.y,this.dx,this.dy,this.time,this.AB);}typedef  PF( gameLoop);typedef  TF( gameLoop);class wD extends ED implements oD{static const WF=0;static const YF=1;static const aF=2;static final  cF=[WF,YF,aF];var VK=0; get dx=>VK;var ZK=0; get dy=>ZK;var dK=0; get x=>dK;var eK=0; get y=>eK;var fK=0; get RD=>fK;var iK=0; get SD=>iK;var jK=0;var mK=0;var oK=false; get hD=>oK;var qK=0.0; get time=>qK;var sK=0; get AB=>sK;wD(g):super(g,cF); TH( g){dK=g.x;eK=g.y;qK=g.time;sK=g.AB;VK+= g.dx;ZK+= g.dy;fK=g.RD;iK=g.SD;oK=g.hD;} xK( h, g){jK+= h;mK+= g;} zK(){jK=0;mK=0;VK=0;ZK=0;}}typedef  xD( gameLoop, touch);class XB{final  id;final  fD=new List<vD>();XB(this.id);}class GC extends BB{final  element;var TK=0;var UK=false;var WK=false;var XK;var YK=0.0;var aK=false;var bK=0.0; get AB=>TK;var ZD=0.03;var gK=0.0; get width=>element.client.width; get height=>element.client.height;var kK=0.0; get PE=>kK;var lK=0.0;var mH=0.05;var pK; get hH=>pK;var rK;var tK; get gH=>tK;var uK;var wK;GC(this.element):super(){rK=new JF(this);tK=new wD(this);uK=new HF(this);pK=new rD(this);wK=new eF(this);} yK(){for(o.KeyboardEvent oB in AL){var h;var UB=oB.type=="keydown";var i=BB.DD(oB.timeStamp);var KB=oB.keyCode;h=new qD(KB,UB,AB,i);rK.JE(h);}AL.clear();gH.zK();var s=element.offset.left;var u=element.offset.top;for(o.MouseEvent g in BL){var wH=g.type=='mousemove';var xH=g.type=='mousewheel';var UB=g.type=='mousedown';var i=BB.DD(g.timeStamp);if(wH){var nB=g.page.x;var OB=g.page.y;var iD=nB-s;var cE=OB-u;var m=0;var j=0;var l=false;if(nB<s){m=0;}else if(nB>s+width){m=width;}else{m=iD;l=true;}if(OB<u){j=0;l=false;}else if(OB>u+height){j=height;l=false;}else{j=cE;}var yH=g.movement.x;var zH=g.movement.y;var h=new GF(iD,cE,yH,zH,m,j,l,i,AB);tK.TH(h);}else if(xH){var EC=g as o.WheelEvent;tK.xK(EC.deltaX,EC.deltaY);}else{var KB=g.button;var h=new qD(KB,UB,AB,i);tK.JE(h);}}BL.clear();for(WB p in CL){switch (p.type){case WB.uD:wK.hK(p.event);break;case WB.tD:wK.nK(p.event);break;case WB.sD:wK.vK(p.event);break;default:throw new StateError('Invalid _GameLoopTouchEven type.');}}CL.clear();} DL( EL){if(XK==null){YK=time;XK=YK;yK();o.window.requestAnimationFrame(DL);return;}if(WK==true){return;}o.window.requestAnimationFrame(DL);TK++ ;XK=YK;YK=time;var g=YK-XK;gK+= g;if(gK>ZD){gK=ZD;}yK();while (gK>=cC){iH();kK+= cC;if(dD!=null){dD(this);}gK-= cC;}if(aK==true&&onResize!=null&&bK<=YK){onResize(this);bK=YK+mH;aK=false;}if(bD!=null){lK=gK/cC;bD(this);}} FL( EL){if(onFullscreenChange==null){return;}onFullscreenChange(this);} GL( EL){if(onFullscreenChange==null){return;}onFullscreenChange(this);}final  CL=new List<WB>(); HL( g){CL.add(new WB(g,WB.uD));} IL( g){CL.add(new WB(g,WB.sD));} JL( g){CL.add(new WB(g,WB.tD));}final  AL=new List<o.KeyboardEvent>(); KL( g){AL.add(g);} LL( g){AL.add(g);}final  BL=new List<o.MouseEvent>(); ML( g){BL.add(g);} NL( g){BL.add(g);} OL( g){BL.add(g);} PL( g){BL.add(g);g.preventDefault();} QL( EL){if(aK==false){aK=true;}} start(){if(UK==false){o.document.onFullscreenError.listen(GL);o.document.onFullscreenChange.listen(FL);o.window.onTouchStart.listen(HL);o.window.onTouchEnd.listen(JL);o.window.onTouchMove.listen(IL);o.window.onKeyDown.listen(KL);o.window.onKeyUp.listen(LL);o.window.onResize.listen(QL);o.window.onMouseMove.listen(OL);o.window.onMouseDown.listen(ML);o.window.onMouseUp.listen(NL);o.window.onMouseWheel.listen(PL);UK=true;}WK=false;o.window.requestAnimationFrame(DL);} stop(){WK=true;} get XC=>o.document.visibilityState=='visible'&&element.hidden==false;var bD;var onResize;var onFullscreenChange;var onPointerLockChange;var onTouchStart;var onTouchEnd;}class eF{final  jC=new Map<int,XB>();final  q;eF(this.q); cK( i, g){var h=new vD(g.client.x,g.client.y,0,0,q.PE,q.AB);i.fD.add(h);} hK( i){i.changedTouches.forEach(( g){var h=new XB(g.identifier);jC[g.identifier]=h;cK(h,g);if(q.onTouchStart!=null){q.onTouchStart(q,h);}});} nK( i){i.changedTouches.forEach(( g){var h=jC[g.identifier];jC.remove(g.identifier);cK(h,g);if(q.onTouchEnd!=null){q.onTouchEnd(q,h);}});} vK( h){h.changedTouches.forEach(( g){var i=jC[g.identifier];cK(i,g);});}}const TI=const UI();class UI{const UI();}const VI=const WI();class WI{const WI();}const XI=const YI();typedef  QB( e);typedef  KG( changes);typedef  YB();typedef  LG();class fC{final oldValue;final newValue;final  changes;fC(this.oldValue,this.newValue,[this.changes]); operator==(g){return g is fC&&oldValue==g.oldValue&&newValue==g.newValue&&changes==g.changes;} get hashCode=>YG(oldValue,newValue,changes); toString(){if(changes!=null)return '#<ChangeNotification to ${newValue}: ${changes}>';return '#<ChangeNotification from ${oldValue} to ${newValue}>';}}class w{static const HB=1;static const FD=2;static const yD=FD|4;static const zD=FD|8;final  type;final key;final oldValue;final newValue;w(this.type,this.key,this.oldValue,this.newValue); operator==(g){return g is w&&type==g.type&&key==g.key&&oldValue==g.oldValue&&newValue==g.newValue;} get hashCode=>ZG(type,key,oldValue,newValue); toString(){var g;switch (type){case HB:g='field';break;case FD:g='index';break;case yD:g='insert';break;case zD:g='remove';break;}return '#<ChangeRecord ${g} ${key} from ${oldValue} to ${newValue}>';}} MG(g, i,[ debugName]){if(g is CB){var h=g;return GD(h,(l){i(new fC(h,h,l));});}var j=new gC(g,i,debugName);if(!j.RL()){return OG;}return j.SL;} GD( g, i){if(g.wB==null)g.wB=new HD();var h=g.wB.add(i);return h.remove;}class CB{var wB;var vB;final  hashCode= ++CB.NG;static var NG=0;} HC( g)=>g.wB!=null&&g.wB.head!=null; get dB=>sB!=null; eB( g, h,i)=>sB.TL(g,h,i); IC( g, j,l, h, i){if((j&(w.yD|w.zD))==0){if(h==i)return;}if(fB==null){fB=[] ;aG(PG);}if(g.vB==null){g.vB=[] ;fB.add(g);}g.vB.add(new w(j,l,h,i));} OG(){}var sB;var AE=100;var fB;var gB; PG(){var m=0;while (fB!=null||gB!=null){var j=fB;fB=null;var i=gB;gB=null;if(m++ ==AE){QG(j,i);return;}if(j!=null){for(var h in j){var s=h.vB;h.vB=null;for(var g=h.wB.head;g!=null;g=g.next){var l=g.value;try {l(s);}catch (u,p){JC(u,p,l,'from ${h}');}}}}if(i!=null){i.forEach((OB,KB){KB.UL();});}}} QG( l, j){var g=[] ;if(l!=null){for(var i in l){var s=i.vB;g.add('${i} ${s}');}}if(j!=null){for(var m in j.values){var h=m.UL();if(h!=null)g.add('${m} ${h}');}}fB=null;gB=null;var p='exceeded notifiction limit of ${AE}, possible ' 'circular reference in observer callbacks: ${g.take(10).join(", ")}';TG(p);}class gC{static var RG=0;final  VL= ++gC.RG;final  WL;final  XL;final  YL;final  ZL=new Map();final  aL=[] ;var bL=false;var cL;gC(this.WL,this.XL,this.YL); toString()=>YL!=null?'<observer ${VL}: ${YL}>':'<observer ${VL}>'; RL(){var h=sB;sB=this;try {cL=WL();if(cL is Iterable&&cL is !List&&cL is !CB){cL=(cL as Iterable).toList();}}catch (g,i){JC(g,i,WL,'from ${this}');cL=null;}ZL.forEach(dL);ZL.clear();assert(sB==this);sB=h;eL();return aL.length>0;} fL( i){try {XL(i);}catch (g,h){JC(g,h,XL,'from ${this}');}} eL(){var g=cL;if(g is !CB)return;aL.add(GD(g,(h){fL(new fC(g,g,h));}));} TL( m, p,g){var i=ZL.putIfAbsent(m,()=>new Map());try {var h=i[g];if(h==null)h=0;i[g]=h|p;}catch (j,l){JC(j,l,g,'hashCode or operator == from ${this}');}} dL( i, j){aL.add(GD(i,(l){if(bL)return;for(var g in l){var h=j[g.key];if(h!=null&&(h&g.type)!=0){bL=true;if(gB==null){gB=new jD.SplayTreeMap();}gB[VL]=this;return;}}}));} SL(){for(var g in aL){g();}bL=false;} UL(){if(!bL)return null;var g=cL;SL();RL();try {if(g==cL)return null;}catch (i,j){JC(i,j,g,'operator == from ${this}');return null;}var h=new fC(g,cL);fL(h);return h;}}typedef  SG( message);var TG=(g)=>print(g);typedef  UG(error,stackTrace,obj, message);var JC=VG; VG(i,g,h, j){print('web_ui.observe: unhandled error calling ${h} ${j}.\n' 'error:\n${i}\n\nstack trace:\n${g}');}class YI{const YI();}class WG{WG();}class XG{XG();}class IB<JB>{var gL;var hL;var iL;var jL;IB.wI( g,this.iL):jL=g{if(iL!=null)iL.kL++ ;} get next=>hL; get value=>jL;set value( g)=>jL=g; lL( g, h){hL=h;gL=g;if(g!=null)g.hL=this;if(h!=null)h.gL=this;return this;} append( g)=>new IB<JB>.wI(g,iL).lL(this,hL); remove(){if(iL==null)return;iL.kL-- ;if(gL!=null){gL.hL=hL;}else{iL.mL=hL;}if(hL!=null){hL.gL=gL;}else{iL.nL=gL;}hL=null;gL=null;iL=null;}}class HD<JB> extends jD.IterableBase<JB>{var mL;var nL; get length=>kL;var kL=0;HD(){} get head=>mL; add( h){var g=new IB<JB>.wI(h,this);if(nL==null)return mL=nL=g;return nL=g.lL(nL,null);} addLast( g)=>add(g); addAll( g)=>g.forEach(add); get iterator=>new ZI<JB>(this);}class ZI<JB> implements Iterator<JB>{var oL;var iL;var pL;var qL=-1;ZI(this.iL){oL=new List<IB>(iL.length);var h=0;var g=iL.head;while (g!=null){oL[h++ ]=g;g=g.next;}} get current=>pL; moveNext(){do{qL++ ;}while(qL<oL.length&&oL[qL].iL!=iL);if(qL<oL.length){pL=oL[qL].value;return true;}else{pL=null;return false;}}}KC(h,g)=>h.hashCode*31+g.hashCode;YG(h,g,i)=>KC(KC(h,g),i);ZG(g,i,h,j)=>KC(KC(g,i),KC(h,j)); aG( h()){var g=new rI.ReceivePort();g.receive((i,j){g.close();h();});g.toSendPort().send(null);} bG(h, g,[ stringValue]){var i=h is WG;if(stringValue==null){stringValue=h.toString();}if(!i&&g is o.Text){g.text=stringValue;}else{var j=g;g=i?new o.Element.html(stringValue):new o.Text(stringValue);j.replaceWith(g);}return g;} cG(g){if(g is XG)return g.toString();g=g.toString();return eG(g)?g:'#';}const dG=const["http","https","ftp","mailto"]; eG( h){var g=new sI.Uri(h).scheme;if(g=='')return true;return dG.contains(g.toLowerCase())||"MAILTO"==g.toUpperCase();}abstract class tB{ NB(){} insert(); remove();}class aI extends tB{final  LE;var rL;final  listener;aI(this.LE,this.listener); insert(){rL=LE.listen(listener);} remove(){rL.cancel();rL=null;}}class bI extends tB{final exp;final  action;final  isFinal;var DB;bI(this.exp,this.action,this.isFinal); insert(){if(isFinal){action(new fC(null,exp()));}else if(DB!=null){throw new StateError('binding already attached');}else{DB=hC(exp,action,'generic-binding');}} remove(){if(!isFinal){DB();DB=null;}}}class cI extends tB{final  bE;final  VD;final  TE;final  isFinal;var DB;cI(this.VD,this.bE,this.TE,this.isFinal); sL(g){bE(TE?cG(g):g);} insert(){if(isFinal){sL(VD());}else if(DB!=null){throw new StateError('data binding already attached.');}else{DB=hC(VD,(g)=>sL(g.newValue),'dom-property-binding');}} remove(){if(!isFinal){DB();DB=null;}}}class dI extends tB{final SB;dI(this.SB); NB(){SB..kC()..MH()..LH();} insert(){SB..SE()..mC();} remove(){SB..oC()..jH();}}class uB extends tB{final  aD;final  children=[] ;final  nodes=[] ;uB(this.aD); listen( i, h){children.add(new aI(i,(g){h(g);kG();}));} TD( h,i){var g=new o.Text('');children.add(new bI(()=>'${h()}',(j){g=bG(h(),g,j.newValue);},i));return g;} YE(g,i,h,[isUrl=false]){children.add(new cI(g,i,isUrl,h));} jB( h,g,i){children.add(new gG(h,g,i));} loop( h,g,i){children.add(new eI(h,g,i));} SB( g){children.add(new dI(g));} add( g)=>nodes.add(g); addAll( g)=>nodes.addAll(g); NB(){for(var g=0,h=children.length;g<h;g++ ){children[g].NB();}} insert(){for(var g=0,h=children.length;g<h;g++ ){children[g].insert();}} remove(){for(var g=children.length-1;g>=0;g-- ){children[g].remove();}children.clear();}}abstract class BE extends uB{final exp;var DB;BE( g,this.exp):super(g); NB(){} insert(){super.NB();if(nodes.length>0){var i=aD.parentNode;var j=aD.nextNode;for(var g=0,h=nodes.length;g<h;g++ ){i.insertBefore(nodes[g],j);}}super.insert();} remove(){super.remove();for(var g=nodes.length-1;g>=0;g-- ){nodes[g].remove();}nodes.clear();}}typedef  fG( template);class gG extends BE{var XC=false;final  IE;gG( h,g,this.IE):super(h,g); insert(){DB=hC(exp,(g){if(!XC&&g.newValue){IE(this);super.insert();XC=true;}else if(XC&&!g.newValue){super.remove();XC=false;}},'conditional-binding');} remove(){super.remove();DB();DB=null;}}typedef  hG( list, index, template);class eI extends BE{final  UE;eI( h,g,this.UE):super(h,g); insert(){DB=hC(exp,(i){super.remove();var h=i.newValue;for(int g=0;g<h.length;g++ ){UE(h,g,this);}super.insert();},'loop-binding');} remove(){super.remove();DB();DB=null;}}var CE=false; iG(g, l,[ debugName]){if(CE)return MG(g,l);if(l==null)return (){};if(LC==null)LC=new HD<MC>();var i;var h=FB.oG;if(g is FE){i=(g as FE).tL;}else if(g is Function){i=g;try {var j=g();if(j is List){h=FB.NC;}else if(j is Iterable){h=FB.NC;i=()=>g().toList();}else if((j is jD.LinkedHashMap)||(j is jD.SplayTreeMap)){h=FB.KD;}else if(j is Map){h=FB.JD;}}catch (m,u){print('error: evaluating ${debugName!=null?debugName:"<unnamed>"} ' 'watcher threw error (${m}, ${u})');}}else if(g is List){i=()=>g;h=FB.NC;}else if(g is Iterable){i=()=>g.toList();h=FB.NC;}else if((g is jD.LinkedHashMap)||(g is jD.SplayTreeMap)){i=()=>g;h=FB.KD;}else if(g is Map){i=()=>g;h=FB.JD;}var p=jG(h,i,l,debugName);var s=LC.add(p);return s.remove;} jG( j, g, i, h){switch (j){case FB.NC:return new fI(g,i,h);case FB.KD:return new hI(g,i,h);case FB.JD:return new gI(g,i,h);default:return new MC(g,i,h);}} hC(h,i,[debugName]){var j=iG(h,i,debugName);var g=h;if(g is Function){g=g();}if(g is Iterable&&g is !List){g=g.toList();}i(new fC(null,g));return j;}var LC;class MC{final  UD;final  tL;final  uL;var vL;MC(this.tL,this.uL,this.UD){vL=tL();} toString()=>UD==null?'<unnamed>':UD; KH(){var g=wL();if(xL(g)){var h=vL;yL(g);uL(new fC(h,g));return true;}return false;} xL(g)=>vL!=g; yL(g){vL=g;}wL(){try {return tL();}catch (g,h){print('error: evaluating ${this} watcher threw an exception (${g}, ${h})');}return vL;}}final  DE=10; kG(){if(LC==null)return;var g;var h=0;do{g=false;for(var i in LC){if(i.KH()){g=true;}}}while(g&& ++h<DE);if(h==DE){print('Possible loop in watchers propagation, stopped dispatch.');}}typedef  EE<lG>();typedef  mG<lG>( value);class FE<lG>{FE();}class fI<lG> extends MC{fI(g, i, h):super(g,i,h){yL(wL());} xL( g){return ID(vL,g);} yL(g){vL=new List<lG>.from(g);}}class gI<iC,nG> extends MC{gI(g, i, h):super(g,i,h){yL(wL());} xL( g){var i=vL.keys;if(i.length!=g.keys.length)return true;var j=i.iterator;while (j.moveNext()){var h=j.current;if(!g.containsKey(h))return true;if(vL[h]!=g[h])return true;}return false;} yL(g){vL=new Map<iC,nG>.from(g);}}class hI<iC,nG> extends MC{hI(g, i, h):super(g,i,h){yL(wL());} xL( g){return ID(g.keys,vL.keys)||ID(g.values,vL.values);} yL(g){vL=new jD.LinkedHashMap.from(g);}} ID( i, j){var h=i.iterator;var g=j.iterator;while (h.moveNext()){if(!g.moveNext())return true;if(h.current!=g.current)return true;}return g.moveNext();}class FB{final zL;const FB.xI(this.zL);toString()=>'Enum.${zL}';static const NC=const FB.xI('LIST');static const JD=const FB.xI('HASH_MAP');static const KD=const FB.xI('ORDERED_MAP');static const oG=const FB.xI('OTHER');}abstract class OC implements o.Element{var AM;var BM;var CM={}; get host{if(AM==null)throw new StateError('host element has not been set.');return AM;}set host( g){if(g==null){throw new ArgumentError('host must not be null.');}var h=g.xtag;if(h!=null&&h!=g){throw new ArgumentError('host must not have its xtag property set.');}if(AM!=null){throw new StateError('host can only be set once.');}g.xtag=this;AM=g;}createShadowRoot([ componentName]){var g=DM();if(componentName!=null){CM[componentName]=g;}return g;}DM(){if(GE){return host.createShadowRoot();}if(BM==null)BM=[] ;BM.add(new o.DivElement());return BM.last;} MH(){} SE(){} jH(){} LH(){if(GE)return;if(BM.length==0){throw new StateError('Distribution algorithm requires at least one shadow' ' root and can only be run once.');}var j=BM;var g=j.removeLast();var p=g;var m=new List.from(nodes);var l=[] ;var s=[] ;while (true){m=EM(g,m);var h=g.query('shadow');if(h!=null){if(j.length>0){g=j.removeLast();l.add(h);s.add(g);}else{MD(h,m);break;}}else{break;}}for(int i=0;i<l.length;i++ ){var h=l[i];var g=s[i];MD(h,g.nodes);}nodes.clear();nodes.addAll(p.nodes);for(var u in CM.keys){if(CM[u]==p){CM[u]=this;break;}}} EM( p, j){for(var g in p.queryAll('content')){if(!qG(g))continue;var i=g.attributes['select'];if(i==null||i=='')i='*';var h=[] ;var m=[] ;for(var l in j){(pG(l,i)?h:m).add(l);}if(h.length==0){h=g.nodes;}MD(g,h);j=m;}return j;}static  pG( h, g){if(h is !o.Element)return g=='*';return (h as o.Element).matches(g);}static  LD( g)=>g.tagName=='CONTENT'||g.tagName=='SHADOW';static  qG( g){assert(LD(g));for(g=g.parent;g!=null;g=g.parent){if(LD(g))return false;}return true;}static  MD( g, h){assert(LD(g));g.parent.insertAllBefore(h,g);g.remove();} get nodes=>host.nodes; replaceWith( g){host.replaceWith(g);} remove()=>host.remove(); get nextNode=>host.nextNode;set text( g){host.text=g;} contains( g)=>host.contains(g); insertBefore( g, h)=>host.insertBefore(g,h); insertAllBefore( g, h)=>host.insertAllBefore(g,h); get attributes=>host.attributes; get elements=>host.children; get children=>host.children; clone( g)=>host.clone(g); get parent=>host.parent; get parentNode=>host.parentNode; get nodeValue=>host.nodeValue; get hidden=>host.hidden; get id=>host.id; set innerHtml( g){host.innerHtml=g;} get tagName=>host.tagName; matches( g)=>host.matches(g); requestPointerLock(){host.requestPointerLock();} query( g)=>host.query(g); queryAll( g)=>host.queryAll(g); get vG=>host.vG; get clientHeight=>client.height; get clientLeft=>client.left; get clientTop=>client.top; get clientWidth=>client.width; get client=>host.client; get wG=>host.wG; get zG=>host.zG; get offsetHeight=>offset.height; get offsetLeft=>offset.left; get offsetTop=>offset.top; get offsetWidth=>offset.width; get offset=>host.offset; xG( g)=>host.xG(g); yG( g)=>host.yG(g); BH( g)=>host.BH(g); CH( g)=>host.CH(g); GH( h, g)=>host.GH(h,g);get tG=>host.tG; get uG=>host.uG; get localName=>host.localName; get AH=>host.AH; sG( h, g,[ useCapture]){host.sG(h,g,useCapture);} DH( g)=>host.DH(g); EH( h, g,[ useCapture]){host.EH(h,g,useCapture);} FH( g, h)=>host.FH(g,h);get xtag=>host.xtag;set xtag(g){host.xtag=g;} append( g)=>host.append(g); get onClick=>host.onClick; get onError=>host.onError; get onKeyDown=>host.onKeyDown; get onKeyUp=>host.onKeyUp; get onLoad=>host.onLoad; get onMouseDown=>host.onMouseDown; get onMouseMove=>host.onMouseMove; get onFullscreenChange=>host.onFullscreenChange; get onFullscreenError=>host.onFullscreenError; get onMouseUp=>host.onMouseUp; get onTouchEnd=>host.onTouchEnd; get onTouchMove=>host.onTouchMove; get onTouchStart=>host.onTouchStart; get onMouseWheel{throw new UnsupportedError('onMouseWheel is not supported');}}var rG=false; get GE=>rG&&o.ShadowRoot.supported;//@ sourceMappingURL=index.html_bootstrap.dart.map
